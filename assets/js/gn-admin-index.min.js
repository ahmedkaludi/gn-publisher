jQuery(document).ready(function(e){var s=e("#gnpub-indexing-giapi-response-body"),n=function(n,i){var r=new Date,a=e("#gnpub-giapi-url").val().split("\n").filter(Boolean),t=a[0],o=!1,d=e(".gnpub-i-i-action").filter(":checked").val();if(a.length>1&&(t="(batch)",o=!0),s.removeClass("not-ready fail success").addClass("ready").find(".gnpub-indexing-response-id").html("<strong>"+d+"</strong> "+t),o)s.addClass("success").find(".gnpub-indexing-response-status").text(gnpub_index_localize_data.l10n_success+" "),void 0!==n.error?s.addClass("fail").find(".gnpub-indexing-response-status").text(gnpub_index_localize_data.l10n_error+" "+n.error.code).siblings(".gnpub-indexing-response-message").text(n.error.message):e.each(n,function(e,n){if(void 0!==n.error){var i="";void 0!==n.error.code&&(i=n.error.code);var r="";void 0!==n.error.message&&(r=n.error.message),s.addClass("fail").find(".gnpub-indexing-response-status").text(gnpub_index_localize_data.l10n_error+" "+i).siblings(".gnpub-indexing-response-message").text(n.error.message)}});else if(void 0!==n.error)s.addClass("fail").find(".gnpub-indexing-response-status").text(gnpub_index_localize_data.l10n_error+" "+n.error.code).siblings(".gnpub-indexing-response-message").text(n.error.message),e(".gnpub-indexing-response-status").css("color","#bb2b2b");else{var g=n;void 0!==n.urlNotificationMetadata&&(g=n.urlNotificationMetadata),void 0!==g.latestUpdate&&(r=new Date(g.latestUpdate.notifyTime)),s.addClass("success").find(".gnpub-indexing-response-status").text(gnpub_index_localize_data.l10n_success+" ").siblings(".gnpub-indexing-response-message").text(gnpub_index_localize_data.l10n_last_updated+" "+r.toString()),e(".gnpub-indexing-response-status").css("color","green")}};e("#gnpub-instant-indexing-send").on("click",function(){var s=e("#gnpub-giapi-url").val(),i=e(".gnpub-i-i-action").filter(":checked").val(),r=e(this);r.addClass("updating-message"),e.ajax({url:ajaxurl,method:"POST",dataType:"json",data:{action:"gnpub_ociaifs_giapi",api_action:i,url:s,gnpub_index_security_nonce:gnpub_index_localize_data.gnpub_index_security_nonce},success:function(e){n(e,s),r.removeClass("updating-message")},error:function(e){console.log("Failed Ajax Request"),console.log(e)}})})});